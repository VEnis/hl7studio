box: 
  id: maven:3.5-jdk-8-alpine
  cmd: /bin/sh
dev:
  steps:
    - script:
        name: mvn version
        code: |
          mvn -version
          mvn -Dmaven.repo.local=$WERCKER_CACHE_DIR/maven package
build:
  steps:
    - script:
        name: mvn package
        code: |
          mvn -version
          mvn -Dmaven.repo.local=$WERCKER_CACHE_DIR/maven package
  after-steps:
    - hipchat-notify:
        token: $HIPCHAT_TOKEN
        room_id: $HIPCHAT_ROOM_ID
        from-name: wercker-build
sonar:
  steps:
    - script:
        name: sonar
        code: |
          mvn -Dmaven.repo.local=$WERCKER_CACHE_DIR/maven sonar:sonar \
            -Dsonar.host.url=https://sonarqube.com \
            -Dsonar.organization=$SONAR_ORG \
            -Dsonar.login=$SONAR_TOKEN
  after-steps:
    - hipchat-notify:
        token: $HIPCHAT_TOKEN
        room_id: $HIPCHAT_ROOM_ID
        from-name: wercker-sonar

